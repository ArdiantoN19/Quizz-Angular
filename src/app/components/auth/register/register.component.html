<div class="login-main">
  <div class="login-main__wave-bottom">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
      <path
        fill="#8b5dff"
        fill-opacity="1"
        d="M0,192L30,202.7C60,213,120,235,180,234.7C240,235,300,213,360,197.3C420,181,480,171,540,186.7C600,203,660,245,720,256C780,267,840,245,900,224C960,203,1020,181,1080,192C1140,203,1200,245,1260,245.3C1320,245,1380,203,1410,181.3L1440,160L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z"
      ></path>
    </svg>
  </div>
  <button (click)="goBackHandler()" mat-flat-button class="btn btn-back">
    Back
    <mat-icon fontIcon="arrow_back" />
  </button>
  <div class="login-wrapper">
    <h1 class="login-wrapper__title">Hi Quizzer!</h1>
    <p class="login-wrapper__subtitle">
      Sign up to discover more - easily register now.
    </p>
    <form class="form" [formGroup]="registerForm" (ngSubmit)="onSubmitHandler()">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Fullname</mat-label>
        <input type="text" matInput formControlName="fullname" required />
        <mat-error class="form-group__error-message">{{
          getErrorMessage("fullname")
        }}</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Username</mat-label>
        <input type="text" matInput formControlName="username" required />
        <mat-error class="form-group__error-message">{{
          getErrorMessage("username")
        }}</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Email</mat-label>
        <input type="email" matInput formControlName="email" required />
        <mat-error class="form-group__error-message">{{
          getErrorMessage("email")
        }}</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Password</mat-label>
        <input type="password" matInput formControlName="password" [type]="isShowPassword ? 'text' : 'password'" required />
        <button mat-icon-button matSuffix type="button" (click)="onShowPasswordHandler()">
          <mat-icon fontIcon="{{isShowPassword ? 'visibility' : 'visibility_off'}}"/>
        </button>
        <mat-error class="form-group__error-message">{{
          getErrorMessage("password")
        }}</mat-error>
      </mat-form-field>
      <button type="submit" mat-flat-button class="btn" [disabled]="isLoading">
        {{!isLoading ? 'Sign Up' : 'Loading'}}
        @if(!isLoading) {
            <mat-icon fontIcon="arrow_outward"/>
        }@else {
            <mat-icon fontIcon="trip_origin"  [class]="{'animate-pulse': isLoading}"/>
        }
      </button>
    </form>
    <div class="login-wrapper__sign-up">
      Have an account?
      <a [routerLink]="['/login']" [queryParams]="{redirectUrl:'/home'}" class="login-wrapper__sign-up__link">Sign In</a>
    </div>
  </div>
</div>
